runOnDevice=False
width, height=128, 64

pet={
    "hunger": 20,
    "happiness": 100,
    "energy": 100,
    "age": 0,
    "current_frame": 0,
}

framesIndividual={
    "happy": [
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
    [0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0],
    [0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0],
    [0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
    ],
    "crying": [
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
    [0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0],
    [0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],
    [1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0],
    [1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0],
    [1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],
    [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0],
    [0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
    ],
    "sad": [
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
    [0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0],
    [0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],
    [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0],
    [0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
    ],
    "depressed": [
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,0,0,1,0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,0,0,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
    [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
    [0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0],
    [0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1],
    [1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,0,0,0,0],
    [1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0],
    [1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],
    [1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1],
    [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
    [0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0],
    [0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,1,1,0,0],
    [0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
    [0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
    ],
}

frames={
    "happy": (
    32, 32,
    bytes([
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 247, 255, 255, 255, 227, 143, 255,
        255, 243, 159, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 15, 255, 255, 255, 127, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 249, 63, 255, 255, 251, 159, 255, 255, 227, 207, 255,
        255, 31, 248, 255, 191, 249, 255, 255, 59, 252, 127, 184, 27, 255, 252, 177,
        251, 255, 249, 191, 143, 255, 243, 227, 127, 255, 247, 240, 255, 255, 255, 193,
        ])
    ),
    "sad": (
    32, 32,
    bytes([
        0, 0, 0, 4, 64, 0, 0, 6, 192, 0, 0, 7, 64, 1, 0, 5,
        64, 1, 0, 5, 64, 226, 135, 4, 192, 255, 255, 7, 192, 255, 255, 7,
        248, 255, 255, 63, 248, 255, 255, 63, 252, 247, 255, 127, 252, 227, 143, 127,
        254, 243, 159, 255, 254, 255, 255, 255, 254, 255, 255, 255, 254, 255, 255, 255,
        253, 255, 255, 15, 255, 255, 255, 127, 255, 255, 255, 255, 255, 255, 255, 255,
        254, 255, 255, 255, 254, 255, 255, 255, 254, 255, 255, 255, 254, 249, 63, 255,
        252, 31, 224, 127, 188, 249, 255, 127, 56, 252, 127, 56, 24, 255, 252, 49,
        240, 255, 249, 31, 128, 255, 243, 3, 0, 252, 247, 0, 0, 224, 31, 0,
    ])
    ),
    "crying": (
    32, 32,
    bytes([
        0, 0, 0, 4, 64, 0, 0, 6, 192, 0, 0, 7, 64, 1, 0, 5,
        64, 1, 0, 5, 64, 226, 135, 4, 192, 255, 255, 7, 192, 255, 255, 7,
        248, 255, 255, 63, 248, 255, 255, 63, 252, 247, 223, 127, 252, 227, 143, 127,
        254, 247, 223, 255, 254, 255, 255, 255, 254, 255, 255, 255, 254, 251, 223, 255,
        253, 255, 223, 15, 255, 239, 239, 127, 255, 255, 255, 255, 255, 247, 191, 255,
        254, 255, 191, 255, 254, 255, 255, 255, 254, 255, 255, 255, 254, 249, 63, 255,
        252, 31, 224, 127, 188, 249, 255, 127, 56, 252, 127, 56, 24, 255, 252, 49,
        240, 255, 249, 31, 128, 255, 243, 3, 0, 252, 247, 0, 0, 224, 31, 0,
    ])
    ),
    "depressed": (
    32, 32,
    bytes([
        0, 0, 0, 4, 64, 0, 0, 6, 192, 0, 0, 7, 64, 1, 0, 5,
        64, 1, 0, 5, 64, 226, 135, 4, 192, 255, 255, 7, 192, 255, 255, 7,
        248, 255, 255, 63, 248, 255, 255, 63, 252, 247, 223, 127, 252, 227, 143, 127,
        254, 247, 223, 255, 254, 255, 255, 255, 254, 255, 255, 255, 254, 251, 223, 255,
        253, 255, 223, 15, 255, 239, 239, 127, 255, 255, 255, 255, 255, 247, 191, 255,
        254, 255, 191, 255, 254, 255, 255, 255, 254, 31, 224, 255, 254, 193, 3, 255,
        252, 255, 255, 127, 188, 241, 255, 127, 56, 252, 127, 56, 24, 255, 252, 49,
        240, 255, 249, 31, 128, 255, 243, 3, 0, 252, 247, 0, 0, 224, 31, 0,
    ])
    ),
    "neutral": (
    32, 32,
    bytes([
        0, 0, 0, 4, 64, 0, 0, 6, 192, 0, 0, 7, 64, 1, 0, 5,
        64, 1, 0, 5, 64, 226, 135, 4, 192, 255, 255, 7, 192, 255, 255, 7,
        248, 255, 255, 63, 248, 255, 255, 63, 252, 247, 255, 127, 252, 227, 143, 127,
        254, 243, 159, 255, 254, 255, 255, 255, 254, 255, 255, 255, 254, 255, 255, 255,
        253, 255, 255, 15, 255, 255, 255, 127, 255, 255, 255, 255, 255, 255, 255, 255,
        254, 255, 255, 255, 254, 3, 128, 255, 254, 255, 255, 255, 254, 255, 255, 255,
        252, 255, 255, 127, 188, 241, 255, 127, 56, 252, 127, 56, 24, 255, 252, 49,
        240, 255, 249, 31, 128, 255, 243, 3, 0, 252, 247, 0, 0, 224, 31, 0,
    ])
    ),
}

currentAction = 0
actions=["Feed","Play","Rest"]
totalActions=3

def clamp(value, minVal=0, maxVal=100):
    return max(minVal, min(maxVal, value))

def incrementAttribute(name, change):
    pet[name]=clamp(pet[name]+change)

def updatePet():
    incrementAttribute("hunger",-5)
    #Hunger is actualyl how full the pet is. 0 is starvation.
    incrementAttribute("happiness",-3)
    incrementAttribute("energy",-2)

def perform_action(action):
    if action==0:
        incrementAttribute("hunger", 25)
        incrementAttribute("happiness", 5)
    elif action==1:
        incrementAttribute("happiness", 15)
        incrementAttribute("energy",-10)
        incrementAttribute("hunger",-5)
    elif action==2:
        incrementAttribute("energy", 20)
        incrementAttribute("happiness", -2)
def moodName():
    if pet["hunger"]<=10 or pet["energy"]<=10:
        return "depressed"
    if pet["hunger"]<=20 or pet["energy"]<=20:
        return "crying"
    if pet["happiness"]>=70:
        return "happy"
    if pet["happiness"]>=30:
        return "sad"
    return "neutral"
def drawPet(oled):
    oled.fill(0)

    #oled.circle(64, 32, 10, 1) #HEad
    #oled.fill_rect(58, 28, 4, 4, 1)#Left eye
    #oled.fill_rect(66, 28, 4, 4, 1)#Right eye
    #oled.hline(58, 38, 10, 1)#Mouth

    #oled.fill_rect(54, 22, 20, 20, 0)
    #oled.fill_rect(54, 22, 20, 20, 1)
    #oled.fill_rect(58, 28, 3, 3, 0)#Left eye hole.
    #oled.fill_rect(67, 28, 3, 3, 0)#Right eye hole.
    #oled.hline(58, 38, 12, 0) #Mouth hole.

    mood=moodName()
    sprite=frames[mood]
    x=(128-sprite[0])//2
    y=5
    blit_sprite(oled, mood, x, y)

    textOutput="H:"+str(pet["hunger"])+" P:"+str(pet["happiness"])+" E:"+str(pet["energy"])
    print(textOutput)
    oled.text(textOutput, 0, 50, 1)

    #currentAction
    oled.text(">"+actions[currentAction], 0, 42)

    oled.show()

import time
if runOnDevice:
    from machine import Pin, I2C
    import ssd1306
    import framebuf

    i2c = I2C(0, scl=Pin(32), sda=Pin(21))
    oled=ssd1306.SSD1306_I2C(128, 64, i2c)

    buttonNext = Pin(12, Pin.IN, Pin.PULL_UP)
    buttonSelect=Pin(13, Pin.IN, Pin.PULL_UP)

    def tick_ms():
        return time.ticks_ms()
    def ticks_diff(a, b):
        return time.ticks_diff(a, b)
    def sleep_ms(ms):
        time.sleep_ms(ms)
    def next_pressed():
        return not buttonNext.value()
    def select_pressed():
        return not buttonSelect.value()

    def blit_sprite(oled, sprite, x, y):
        width, height, data = sprite
        buffer = bytearray(data)
        frameBuffer = framebuf.FrameBuffer(buffer, width, height, framebuf.MONO_HSLB)
        oled.blit(frameBuffer, x, y)
else:
    import pygame
    import sys

    #ESP model is ESP32 C3SuperMini

    def blit_sprite(oled, sprite, x, y):
        width, height, data = sprite
        bytesPerRow = (width+7) // 8
        for y2 in range(h):
            rowBase = y2 * bytesPerRow
            for x2 in range()

    class FakeOled:
        def __init__(self, scale=6):
            self.width, self.height = width, height
            self.scale=scale
            self.frame=[[0]*self.width for _ in range(self.height)]

            pygame.init()
            self.screen=pygame.display.set_mode((self.width*self.scale, self.height*self.scale))
            pygame.display.set_caption("Tomagatchi-9000")
            self.clock = pygame.time.Clock()
            self.font = pygame.font.SysFont("Courier", 10)
        def fill(self, colour):
            v=1 if colour else 0
            for y in range(self.height):
                for x in range(self.width):
                    self.frame[y][x] = v
        def pixel(self, x, y, colour=1):
            if 0<=x<self.width and 0<=y<self.height:
                self.frame[y][x]=colour
        def hline(self, x, y, length, colour=1):
            for i in range(length):
                if x+i>=self.width:
                    break
                self.pixel(x+i,y,colour)
        def fill_rect(self, x, y, width, height, colour=1):
            for y2 in range(y, y+height):
                if y2>=self.height:
                    break
                for x2 in range(x, x+width):
                    if x2>=self.width:
                        break
                    self.pixel(x2, y2, colour)
        def text(self, message, x, y, colour=1):
            fg=(255, 255, 255) if colour==1 else (0,0,0)
            bg=(0, 0, 0)
            surface=  self.font.render(message, False, fg, bg)
            surfaceWidth, surfaceHeight = surface.get_size()
            for y2 in range(surfaceHeight):
                for x2 in range(surfaceWidth):
                    if 0<=x+x2<self.width and 0<=y+y2<self.height:
                        r, g, b, *rest = surface.get_at((x2, y2))
                        if r>128:
                            self.frame[y+y2][x+x2]=colour
        def _poll_events(self):
            self._next=False
            self._select=False
            for event in pygame.event.get():
                if event.type==pygame.QUIT:
                    pygame.quit()
                    sys.exit()
                if event.type==pygame.KEYDOWN:
                    if event.key==pygame.K_n:
                        self._next=True
                    if event.key==pygame.K_s:
                        self._select=True
        def show(self):
            self._poll_events()
            self.screen.fill((0,0,0))
            for y in range(self.height):
                for x in range(self.width):
                    if self.frame[y][x]:
                        pygame.draw.rect(
                            self.screen,
                            (255,255,255),
                            (x*self.scale, y*self.scale, self.scale, self.scale)
                        )
            pygame.display.flip()
            self.clock.tick(60)
        def next_pressed(self):
            return self._next
        def select_pressed(self):
            return self._select
    oled=FakeOled(scale=6)
    def tick_ms():
        return int(time.monotonic()*1000)
    def ticks_diff(a, b):
        return a-b
    def sleep_ms(ms):
        time.sleep(ms/1000)
    def next_pressed():
        return oled.next_pressed()
    def select_pressed():
        return oled.select_pressed()

lastUpdate = tick_ms()
updateInterval = 100 #0.1 milliseconds

drawPet(oled)

mainLoop=True
while mainLoop:
    #Every "updateInterval" seconds, the pet is updated and drawn. :)
    #if time.ticks_diff(time.ticks_ms(), lastUpdate) > updateInterval:
    #    lastUpdate=time.ticks_ms()
    #    updatePet()
    #    drawPet(oled)
    ##Buttons.
    #if not buttonNext.value():
    #    currentAction=(currentAction+1)%totalActions
    #    time.sleep_ms(200)
    #if not buttonSelect.value():
    #    perform_action(currentAction)
    #    drawPet()
    #    time.sleep_ms(200)
    now=tick_ms()
    if ticks_diff(now, lastUpdate) > updateInterval:
        lastUpdate=now
        updatePet()
        drawPet(oled)
    if next_pressed():
        currentAction=(currentAction+1)%totalActions
        drawPet(oled)
        sleep_ms(200)
    if select_pressed():
        perform_action(currentAction)
        drawPet(oled)
        sleep_ms(200)
    #Small idle to avoid overusing CPU. :)
    sleep_ms(10)